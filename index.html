<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Login & Registrierung</title>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<style>
  body { font-family: Arial, sans-serif; max-width: 400px; margin: 50px auto; }
  input, button { width: 100%; margin: 8px 0; padding: 10px; font-size: 16px; }
  button { cursor: pointer; }
  #message { margin-top: 10px; color: red; }
</style>
</head>
<body>

<h2>Login oder Konto erstellen</h2>

<input id="email" type="email" placeholder="E-Mail" />
<input id="password" type="password" placeholder="Passwort" />

<button id="loginBtn">Login</button>
<button id="registerBtn">Registrieren</button>

<p id="message"></p>

<script>
// Supabase initialisieren
const supabaseUrl = 'https://rshbpsxqbabpxhdztozz.supabase.co';
const supabaseAnonKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InJzaGJwc3hxYmFicHhoZHp0b3p6Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTAzNjYyMDgsImV4cCI6MjA2NTk0MjIwOH0.4MG6d3QkPv7hj7PcCacZgXp-8YRD_2ANHd7bvFzxtX4';

const supabase = supabase.createClient(supabaseUrl, supabaseAnonKey);

const loginBtn = document.getElementById('loginBtn');
const registerBtn = document.getElementById('registerBtn');
const message = document.getElementById('message');

function showMessage(msg, isError = true) {
  message.style.color = isError ? 'red' : 'green';
  message.textContent = msg;
}

loginBtn.addEventListener('click', async () => {
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  if (!email || !password) {
    showMessage('Bitte E-Mail und Passwort eingeben.');
    return;
  }
  const { data, error } = await supabase.auth.signInWithPassword({ email, password });
  if (error) {
    showMessage('Login fehlgeschlagen: ' + error.message);
  } else {
    showMessage('Erfolgreich eingeloggt!', false);
    // Hier z.B. Weiterleitung:
    // window.location.href = 'steuerungsseite.html';
  }
});

registerBtn.addEventListener('click', async () => {
  const email = document.getElementById('email').value.trim();
  const password = document.getElementById('password').value.trim();
  if (!email || !password) {
    showMessage('Bitte E-Mail und Passwort eingeben.');
    return;
  }
  const { data, error } = await supabase.auth.signUp({ email, password });
  if (error) {
    showMessage('Registrierung fehlgeschlagen: ' + error.message);
  } else {
    showMessage('Registrierung erfolgreich! Bitte best√§tige deine E-Mail.', false);
  }
});
</script>

</body>
</html>
